{
  "name": "UI Real-time Updates Test Configuration",
  "version": "1.0.0",
  "description": "Comprehensive test configuration for ensuring UI correctly displays real-time updates across all proxy types",

  "testEnvironment": {
    "node": "18.x",
    "electron": "latest",
    "browsers": ["chromium", "firefox"],
    "timeout": 30000,
    "retries": 2
  },

  "services": {
    "normalProxy": {
      "port": 4000,
      "targetHost": "localhost",
      "targetPort": 3009,
      "autoStart": true
    },
    "databaseProxy": {
      "port": 4445,
      "targetHost": "localhost",
      "targetPort": 5432,
      "autoStart": true
    },
    "outgoingProxy": {
      "port": 4444,
      "targetUrl": "https://jsonplaceholder.typicode.com",
      "autoStart": true
    },
    "testAPI": {
      "port": 3009,
      "autoStart": true
    },
    "rendererDevServer": {
      "port": 8765,
      "autoStart": true
    }
  },

  "databases": {
    "postgresql": {
      "port": 5432,
      "host": "localhost",
      "database": "sniffler_test",
      "username": "sniffler",
      "password": "password"
    },
    "mysql": {
      "port": 3306,
      "host": "localhost",
      "database": "sniffler_test",
      "username": "sniffler",
      "password": "password"
    },
    "mongodb": {
      "port": 27017,
      "host": "localhost",
      "database": "sniffler_test"
    },
    "redis": {
      "port": 6379,
      "host": "localhost"
    }
  },

  "testCategories": {
    "unitTests": {
      "enabled": true,
      "pattern": "tests/ui/unit/**/*.test.{js,jsx}",
      "framework": "jest",
      "timeout": 10000
    },
    "integrationTests": {
      "enabled": true,
      "pattern": "tests/integration/**/*.test.js",
      "framework": "jest",
      "timeout": 30000,
      "setupFiles": ["tests/setup/global-setup.js"]
    },
    "uiIntegrationTests": {
      "enabled": true,
      "pattern": "tests/ui/integration/**/*.test.jsx",
      "framework": "jest",
      "timeout": 20000,
      "setupFiles": ["tests/setup/ui-jest-setup.js"]
    },
    "e2eTests": {
      "enabled": true,
      "pattern": "tests/e2e/**/*.e2e.test.js",
      "framework": "playwright",
      "timeout": 60000,
      "browsers": ["chromium"],
      "headless": false
    }
  },

  "coverage": {
    "enabled": true,
    "threshold": {
      "branches": 80,
      "functions": 80,
      "lines": 80,
      "statements": 80
    },
    "collectFrom": ["apps/renderer/src/**/*.{js,jsx}", "apps/main/**/*.js"],
    "ignore": [
      "**/*.test.{js,jsx}",
      "**/node_modules/**",
      "**/dist/**",
      "**/coverage/**"
    ]
  },

  "testScenarios": {
    "normalRequestFlow": {
      "description": "Test normal HTTP request through proxy with UI updates",
      "steps": [
        "Start normal proxy on port 4000",
        "Make GET request to /api/test",
        "Verify request appears in UI immediately",
        "Verify response updates request status",
        "Verify mock is auto-created (if enabled)",
        "Verify mock appears in UI"
      ],
      "expectedEvents": [
        "proxy-request",
        "proxy-response",
        "mock-auto-created"
      ],
      "timeout": 10000
    },

    "databaseRequestFlow": {
      "description": "Test database query through proxy with UI updates",
      "steps": [
        "Start database proxy on port 4445",
        "Execute SQL query through proxy",
        "Verify query appears in database view",
        "Verify query response updates status",
        "Verify database mock is created",
        "Verify mock appears in database mocks view"
      ],
      "expectedEvents": [
        "database-query",
        "database-response",
        "database-mock-created"
      ],
      "timeout": 15000
    },

    "outgoingRequestFlow": {
      "description": "Test outgoing request through proxy with UI updates",
      "steps": [
        "Start outgoing proxy on port 4444",
        "Make request to external API through proxy",
        "Verify request appears in outgoing requests view",
        "Verify response updates request status",
        "Verify outgoing mock is created",
        "Verify mock appears in outgoing mocks view"
      ],
      "expectedEvents": [
        "outgoing-request",
        "outgoing-response",
        "outgoing-mock-created"
      ],
      "timeout": 12000
    },

    "simultaneousRequests": {
      "description": "Test simultaneous requests across all proxy types",
      "steps": [
        "Start all proxy types",
        "Make concurrent requests to all proxies",
        "Verify all requests appear in respective UI views",
        "Verify all responses update correctly",
        "Verify all mocks are created",
        "Verify dashboard overview shows updated counts"
      ],
      "expectedEvents": [
        "proxy-request",
        "database-query",
        "outgoing-request",
        "proxy-response",
        "database-response",
        "outgoing-response",
        "mock-auto-created",
        "database-mock-created",
        "outgoing-mock-created"
      ],
      "timeout": 20000
    },

    "highVolumeRequests": {
      "description": "Test UI performance under high request volume",
      "steps": [
        "Start all proxies",
        "Generate 50+ requests per proxy type",
        "Verify UI remains responsive",
        "Verify all requests are captured",
        "Verify memory usage remains stable",
        "Verify no requests are lost"
      ],
      "requestCount": 50,
      "timeout": 30000
    },

    "mockManagement": {
      "description": "Test mock creation, editing, and management",
      "steps": [
        "Create mocks through auto-save",
        "Verify mocks are disabled by default",
        "Enable mocks manually",
        "Verify enabled mocks are served",
        "Edit mock responses",
        "Verify edited responses are returned",
        "Delete mocks",
        "Verify deleted mocks no longer serve"
      ],
      "timeout": 15000
    },

    "errorHandling": {
      "description": "Test error handling in real-time updates",
      "steps": [
        "Make requests to non-existent endpoints",
        "Verify error status appears in UI",
        "Test proxy connection failures",
        "Verify error messages are displayed",
        "Test malformed requests",
        "Verify graceful error handling"
      ],
      "timeout": 10000
    },

    "stateManagement": {
      "description": "Test UI state consistency during updates",
      "steps": [
        "Make multiple requests rapidly",
        "Verify request order is preserved",
        "Test filtering and sorting",
        "Verify filters work correctly",
        "Test navigation between views",
        "Verify state is maintained"
      ],
      "timeout": 15000
    }
  },

  "assertions": {
    "requestAppearance": {
      "description": "Request appears in UI within 2 seconds",
      "selector": "[data-testid='request-item']",
      "timeout": 2000
    },
    "statusUpdate": {
      "description": "Request status updates from pending to completed",
      "selector": "[data-testid='request-status']",
      "timeout": 10000
    },
    "mockCreation": {
      "description": "Mock appears in UI within 3 seconds",
      "selector": "[data-testid='mock-item']",
      "timeout": 3000
    },
    "uiResponsiveness": {
      "description": "UI remains interactive during updates",
      "checks": ["click events", "scroll events", "navigation"],
      "timeout": 1000
    }
  },

  "reporting": {
    "formats": ["console", "json", "html"],
    "outputDir": "tests/reports",
    "includeScreenshots": true,
    "includeVideos": false,
    "includeLogs": true,
    "generateSummary": true
  },

  "ci": {
    "enabled": true,
    "failFast": false,
    "parallel": true,
    "maxWorkers": 4,
    "retryFailedTests": true,
    "uploadArtifacts": true
  }
}
